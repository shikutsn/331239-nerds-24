var writeusButton=document.querySelector(".contacts-writeus"),writeusWindow=document.querySelector(".modal-writeus"),writeusClose=writeusWindow.querySelector(".modal-close"),writeusForm=writeusWindow.querySelector(".writeus-form"),nameField=writeusWindow.querySelector("[name=name]"),emailField=writeusWindow.querySelector("[name=email]"),letterField=writeusWindow.querySelector("[name=letter]"),isStorageSupported=!0,storagedName="",storagedEmail="";try{storagedName=localStorage.getItem("name"),storagedEmail=localStorage.getItem("email")}catch(e){isStorageSupported=!1}function closeModalWindow(){writeusWindow.classList.contains("modal-show")&&(writeusWindow.classList.remove("modal-show"),writeusWindow.classList.remove("modal-error"))}writeusButton.addEventListener("click",function(e){e.preventDefault(),writeusWindow.classList.add("modal-show"),storagedName&&(nameField.value=storagedName),storagedEmail&&(emailField.value=storagedEmail),storagedName&&storagedEmail?letterField.focus():storagedName?emailField.focus():nameField.focus()}),writeusForm.addEventListener("submit",function(e){nameField.value&&emailField.value&&letterField.value?isStorageSupported&&(localStorage.setItem("name",nameField.value),localStorage.setItem("email",emailField.value)):(e.preventDefault(),writeusWindow.classList.remove("modal-error"),writeusWindow.offsetWidth,writeusWindow.classList.add("modal-error"),nameField.value||nameField.classList.add("modal-invalid-field"),emailField.value||emailField.classList.add("modal-invalid-field"),letterField.value||letterField.classList.add("modal-invalid-field"))}),nameField.addEventListener("input",function(e){nameField.classList.contains("modal-invalid-field")&&nameField.classList.remove("modal-invalid-field")}),emailField.addEventListener("input",function(e){emailField.classList.contains("modal-invalid-field")&&emailField.classList.remove("modal-invalid-field")}),letterField.addEventListener("input",function(e){letterField.classList.contains("modal-invalid-field")&&letterField.classList.remove("modal-invalid-field")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),closeModalWindow())}),writeusClose.addEventListener("click",function(e){e.preventDefault(),closeModalWindow()});